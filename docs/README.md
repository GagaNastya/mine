# Описание требований и архитектуры

## Введение
<!-- Общее краткое описание создаваемой системы -->
В рамках курса осуществляется проектирование решения на основе [постановки задачи от "заказчика"](task.md).

- [Описание требований и архитектуры](#описание-требований-и-архитектуры)
  - [Введение](#введение)
  - [Заинтересованные стороны](#заинтересованные-стороны)
  - [Бизнес-контекст (бизнес-требования)](#бизнес-контекст-бизнес-требования)
- [Бизнес-требования](#бизнес-требования)
- [Бизнес-метрики](#бизнес-метрики)
  - [Глоссарий](#глоссарий)
  - [Модель предметной области](#модель-предметной-области)
  - [Требования к системе](#требования-к-системе)
    - [Сценарии использования (Use case)](#сценарии-использования-use-case)
    - [Функциональные требования](#функциональные-требования)
    - [Нефункциональные требования/Требования к атрибутам качества](#нефункциональные-требованиятребования-к-атрибутам-качества)
    - [Ограничения](#ограничения)
  - [Архитектура](#архитектура)
    - [Журнал архитектурных решений](#журнал-архитектурных-решений)
    - [\[Контекст решения\]](#контекст-решения)
    - [Контейнерная архитектура](#контейнерная-архитектура)
    - [Компонентная архитектура](#компонентная-архитектура)
    - [Реализация сценариев использования](#реализация-сценариев-использования)
    - [Программные интерфейсы](#программные-интерфейсы)
    - [Схема развертывания](#схема-развертывания)
  
## Заинтересованные стороны
<!-- Перечень заинтересованных сторон и их интересов по отношению к создаваемой системе. 
Подробнее: https://confluence.mts.ru/pages/viewpage.action?pageId=399975538 
-->
| Заинтересованная сторона | Интересы           |
|:-------------------------|:-------------------|
|*Активно вовлеченные в проект:*|
| Организаторы конференции | Содержание, формат и бюджет конференции |
| Спонсоры| Финансирование и заинтересованность в результате конференции|
| Технический персонал| Обеспечение технической поддержки|
|*Будут пользоваться результатами проекта:*|
| Докладчики               | Представление своего доклада        |
| Слушатели конференции| Содержание конференции|
|Рецензенты| Рецензирование докладов, общение с Докладчиками|
|*Не вовлечены в проект, но способны на него воздействовать:*|
|Регуляторные органы|Соответствие системы законодательству|
|Конкуренты|Провал проекта, для укрепления своих позиций на рынке|



## Бизнес-контекст (бизнес-требования)
<!-- Общее описание бизнес-контекста создаваемой системы (автоматизируемой деятельности), список бизнес-целей заинтересованных сторон 
Подробнее: https://confluence.mts.ru/pages/viewpage.action?pageId=399973845
-->
# Бизнес-требования
**1) Работа с участниками конференции:**
*Заинтересованные стороны Докладчики, Слушатели, Организаторы, Рецензенты*
- Система должна позволять подавать свои заявки на участие в конференции, включая информацию о теме доклада, аннотации, резюме и контактные данные.
- Система должна обеспечивать процесс отбора заявок на участие в конференции.
- Система должна быть доступна для использования в любое время.
- Система должна предоставлять Докладчикам информацию о том, какие заявки были отобраны для участия в конференции, а также обратную связь по заявкам.
– Система должна предоставлять Рецензентам возможность оценивать доклады. 
- Система должна обеспечивать защиту персональных данных участников конференции, а также обеспечивать безопасность и надежность хранения и обработки данных.

**2) Работа с расписанием :**
*Заинтересованные стороны Докладчики, Слушатели, Организаторы*
- Система должна предоставлять возможность создания расписания конференции.
- Система должна позволять организаторам конференции изменять расписание в любое время и обеспечивать быстрое обновление информации и информирование для участников конференции.

**3) Проведение конференции:**
*Заинтересованные стороны Докладчики, Слушатели, Организаторы, Технический персонал, Спонсоры*
- Система должна обеспечивать бесперебойную трансляцию конференции онлайн для удаленных участников.
- Система должна позволять участникам конференции оценивать доклады и давать обратную связь организаторам.
- Система должна предоставлять Организаторам конференции информацию о количестве участников, их профилях и другой статистической информации, которая может быть полезна для оценки успеха конференции.
# Бизнес-метрики
1. Количество поданных докладов – 500
2. Количество просмотров одной трансляции конференции – 2000


## Глоссарий
<!-- Содержит основные понятия и термины предметной области  
Подробнее: https://confluence.mts.ru/pages/viewpage.action?pageId=375782595
-->
| Понятие                        | Сокращение                         | Определение                       |
|:-------------------------------|:-----------------------------------|:----------------------------------|
| *Термин, обозначающий понятие* | *Сокращение термина (при наличии)* | *Развернутое определение понятия* |

## [Модель предметной области](data/data.md)
**Состав бизнес-сущностей**
| Бизнес-сущность                        | Описание                   | 
|:-------------------------------|:-----------------------------------|
| Докладчики| Физические лица, которые подали заявку на участие в конференции и были отобраны для презентации своих докладов|
|Слушатели конференции|Физические лица, которые зарегистрировались для участия в конференции и имеют доступ к информации о конференции|
|Организаторы|Физические или юридические лица, ответственные за организацию и проведение конференции|
|Рецензенты|Физические лица, которые имеют право просматривать и оценивать заявки на участие в конференции и давать рекомендации по отбору докладов|
|Модераторы|Физические лица, которые отвечают за общение с докладчиками, сбор презентаций и контроль качества контента|
|Технический персонал|Физические лица, которые занимаются трансляцией конференции в режиме реального времени для удаленных участников, а также следать за возникновением технических проблем и исправляют их|
|Информационные ресурсы|информационные каналы и площадки, которые могут быть использованы для продвижения конференции и обмена информацией между участниками|

**Модель данных**

```plantuml
@startuml Мод

!define ENTITY_SUPPORT

entity "Докладчики" as Speakers {
    * ID : int
    --
    * Фамилия : string
    * Имя : string
    * Компания : string
    * Email : string
    * Телефон : string
    * Тема_доклада : string
    * Описание_доклада : string
    * Статус_доклада : string
    * Дата_подачи_заявки : date
    * Дата_рассмотрения_заявки : date
}

entity "Слушатели конференции" as Listeners {
    * ID : int
    --
    * Фамилия : string
    * Имя : string
    * Компания : string
    * Email : string
    * Телефон : string
}

entity "Организаторы" as Organizers {
    * ID : int
    --
    * Фамилия : string
    * Имя : string
    * Компания : string
    * Email : string
    * Телефон : string
}

entity "Рецензенты" as Reviewers {
    * ID : int
    --
    * Фамилия : string
    * Имя : string
    * Компания : string
    * Email : string
    * Телефон : string
}

entity "Модераторы" as Moderators {
    * ID : int
    --
    * Фамилия : string
    * Имя : string
    * Компания : string
    * Email : string
    * Телефон : string
}

entity "Технический персонал" as TechnicalStaff {
    * ID : int
    --
    * Фамилия : string
    * Имя : string
    * Компания : string
    * Email : string
    * Телефон : string
}

entity "Информационные ресурсы" as InformationResources {
    * ID : int
    --
    * Название : string
    * URL : string
}

Speakers --o Reviewers : доклад оценивает рецензент
Speakers --o Moderators : докладчик консультируется с модератором
Speakers --|> InformationResources : докладчик использует ресурсы
Reviewers --o Moderators : рецензент консультируется с модератором
Moderators --o Organizers : модератор консультируется с организатором
TechnicalStaff --o Organizers : технический персонал помогает организаторам
Listeners --o Moderators : слушатель задает вопрос модератору
Listeners --o TechnicalStaff : слушатель обращается за помощью к техническому персоналу

@enduml

```

## Требования к системе

### Сценарии использования (Use case)
<!-- Подробное описание сценариев использования системы с привязкой к ролям участников и задействованным бизнес-сущностям 
https://confluence.mts.ru/pages/viewpage.action?pageId=375782108 
https://confluence.mts.ru/pages/viewpage.action?pageId=375782119 
-->
#### Диаграмма сценариев использования (Use Case Diagram) <!-- omit in toc -->

```plantuml
@startuml
left to right direction
actor "Food Critic" as fc
rectangle Restaurant {
  usecase "Eat Food" as UC1
  usecase "Pay for Food" as UC2
  usecase "Drink" as UC3
}
fc --> UC1
fc --> UC2
fc --> UC3
@enduml

```

#### Список сценариев использования <!-- omit in toc -->

| ID     | Описание                                          |
|--------|---------------------------------------------------|
| UC.001 | *[Название сценария использования](uc/uc.001.md)* |

### Функциональные требования
<!-- Описание требований к функциям, реализуемым системой. Требование может быть привязано к сценарию использования или быть общим 
Подробнее: https://confluence.mts.ru/pages/viewpage.action?pageId=375782501 
-->
| ID     | Функциональное требование             |
|--------|---------------------------------------|
|  **Блок работа с участниками конференции**                                   ||
| FR.001| Система должна предоставлять форму для подачи заявок на участие в конференции, включая возможность прикрепления файлов (например, аннотации, резюме, презентации) |
|FR.002|Система должна обеспечивать возможность оценивать заявки Организаторам, выбирать Докладчиков и составлять программу конференции|
|FR.003|Система должна предоставлять Докладчикам возможность получить обратную связь и исправить доклад|
|FR.004|Система должна предоставлять Докладчикам информацию о том, какие заявки были отобраны|
|FR.005|Система должна обеспечивать защиту персональных данных участников конференции, а также обеспечивать безопасность и надежность хранения и обработки данных|
|FR.006|Система должна быть доступна для использования в любое время, включая высокую доступность и быстрый отклик на запросы пользователей|
|**Блок работа с расписанием**||
|FR.007|Система должна предоставлять возможность Организаторам создания расписания конференции: включая информацию о времени начала и конца каждого доклада, панельной дискуссии, перерывов и других мероприятий|
|FR.008|Система должна позволять Организаторам конференции изменять расписание в любое время и обеспечивать быстрое оповещение по почте Докладчиков и Слушателей|
|**Блок проведение конференции**||
|FR.009|Система должна обеспечивать трансляцию конференции онлайн для удаленных участников|
|FR.010|Система должна позволять участникам конференции оценивать доклады и давать обратную связь организаторам|
|FR.011|Система должна предоставлять организаторам конференции информацию о количестве участников, их профилях и другой статистической информации, которая может быть полезна для оценки успеха конференции|
|FR.012|Система должна быть интегрирована с другими системами, которые могут использоваться для проведения конференции, включая системы управления|


### Нефункциональные требования/Требования к атрибутам качества
<!-- Требования к основным архитектурным характеристикам (атрибутам качества) системы - надежность, масштабируемость, ИБ, и др.
Подробнее: https://confluence.mts.ru/pages/viewpage.action?pageId=375782530
-->
| Бизнес метрика     | Нефункциональное требование    | ID        | Атрибут качества    | Как мониторить         |
|--------------------|--------------------------------|-----------|---------------------|------------------------|
|**Количество поданных докладов – 500**|Система должна обеспечивать возможность одновременной обработки не менее 2 заявки на доклад в час, 48 заявок в день, 336 заявок в неделю|Высокая скорость обработки данных и быстрый доступ к ним при ограничении масштабов системы|PRF.001|Производительность| Мониторинг нагрузки на веб-сервер и пропускной способности сети при трансляции конференции|
||||| Мониторинг логов системы для выявления ошибок и проблем производительности|
||Инструменты обратной связи должны быть доступны как минимум в течение 48 часов после получения уведомления о том, что доклад был отклонен|REL.001|Надежность| Логирование времени получения уведомления о том, что доклад был отклонен и времени доступности инструментов обратной связи|
|||||Использование систем мониторинга, которые будут проверять доступность инструментов обратной связи каждые несколько минут или часов|
|**Количество просмотров одной трансляции конференции – 2000**| Пропускная способность интернет-канала должна быть не менее 75 Мбит/с|PRF.002|Производительность| Проведение тестов на пропускную способность|
||||| Использование сетевых утилит для измерения скорости передачи данных|
||Задержка при передаче должна быть не более 3 секунд|PRF.003|Производительность| Измерять время ответа сервера на запросы клиентов и определять среднее время отклика|
||Наличие не менее 2-х резервных серверов для трансляции|REL.002|Надежность| Использовать системы мониторинга производительности, которые оповещают администраторов о сбоях и проблемах с доступностью серверов|
||||| Использовать механизмы автоматического восстановления системы, которые будут запускать резервные серверы в случае отказа основного|

### Ограничения
<!-- Описываются ограничения, оказывающие влияние на архитектуру системы - временные, финансовые, технологические
Подробнее: https://confluence.mts.ru/pages/viewpage.action?pageId=375782592
-->
| ID     | Ограничение            |
|--------|------------------------|
| AC.001 | *Описание ограничения* |

## Архитектура

### Журнал архитектурных решений
<!-- Записи о ключевых принятых архитектурных решениях (ADR) для реализации архитектурно-значимых требований.
Подробнее: https://confluence.mts.ru/pages/viewpage.action?pageId=421162308
-->
- [ADR.001 Категория системы ACID база данных СA](adr/ADR.001_systemcateg.mg)
- [ADR.002 Интеграционное взаимодейтсвие REST API](adr/ADR.002_integration.md)

### Контекст решения

```plantuml
@startuml C5_Elements
title Контекстная диаграмма программной системы
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Container.puml

Person(customer, "Слушатель конференции")
Person(user, "Докладчик")
Person(sponsor, "Спонсор", "Организация, финансирующая конференцию")
System_Boundary(conference, "helloconf.mts.ru"){
    Person(organizer, "Организатор", "Организатор конференции") 
    Container(workflow, "Работа с докладчиками", "Включает функциональность для подачи докладов, обратной связи с докладчиками и управления докладами")
    Container(reviewer, "Рецензирование докладов", "Включает функциональность для оценки докладов, принятия решений и выбора докладов для конференции") 
    Container(schedule, "Работа с расписанием", " Включает функциональность для планирования докладов, управления временем и составлении программы конференции") 
    Person(technical_staff, "Технический персонал", "Технический персонал для проведения конференции")
    Container(broadcast, "Трансляция конференции", "Включает функциональность для записи и трансляции докладов в режиме реального времени") 
    Container(feedback, "Сбор обратной связи", "Включает функциональность для оценки и комментирования докладов") 
    Person(recenzent, "Рецензенты", "Рецензирование докладов, общение с Докладчиками")
    
    Rel(organizer, schedule, "Использование")
    BiRel_L(workflow, user, "Взаимодействие")
    Rel_L(workflow, reviewer, "Подача докладов")
    workflow-> schedule: Подача докладов
    schedule --> broadcast: Синхронизация
    broadcast --> feedback: Синхронизация
    Rel_U(technical_staff,broadcast, "Подготовка")
    technical_staff -> conference: Техническое обеспечение 
    customer -> broadcast: Просмотр
    user -> broadcast: Выступление
    Rel_U(sponsor,conference, "Финансирование")
    Rel_D(recenzent,reviewer, "Использование")
    Rel(customer, feedback, "Использование")
    Rel(user, feedback, "Использование")
    Rel(organizer, feedback, "Использование")

}
@enduml
```

### Контейнерная архитектура

```plantuml
@startuml C4_Containers
!define C4_CONTAINER_NO_COMPONENT true
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/v2.3.0/C4_Container.puml

title Контейнерная диаграмма программной системы
Person(customer, "Слушатель конференции")
Person(user, "Докладчик")
Person(sponsor, "Спонсор", "Организация, финансирующая конференцию")
System_Boundary(conference, "helloconf.mts.ru") {

    Person(organizer, "Организатор", "Организатор конференции")

    package "Работа с докладчиками" {
        Container(workflow, "Работа с докладчиками", "java", "Включает функциональность для подачи докладов, обратной связи с докладчиками и управления докладами")
        Container(workflowAPI, "REST API", "java", "Функции API для работы с докладчиками")
        Container(reviewer, "Рецензирование докладов", "java", "Включает функциональность для оценки докладов, принятия решений и выбора докладов для конференции")
        Container(reviewerAPI, "REST API", "java", "Функции API для рецензирования докладов")
        Person(recenzent, "Рецензенты", "Рецензирование докладов, общение с Докладчиками")
        reviewer <--> workflow: Синхронизация
        sponsor --> conference: Финансирование
    }

    package "Работа с расписанием" {
        Container(schedule, "Работа с расписанием", "java", "Включает функциональность для планирования докладов, управления временем и составлении программы конференции") 
    }

    package "Проведение конференции" {
        Container(feedbackAPI, "REST API", "java", "Функции API для сбора обратной связи")
        Container(broadcast, "Трансляция конференции","java","Включает функциональность для записи и трансляции докладов в режиме реального времени") 
        Container(feedback, "Обратная связь", "java", "Включает функциональность для оценки и комментирования докладов") 
        Person(technical_staff, "Технический персонал", "Технический персонал для проведения конференции")
        Rel(technical_staff, broadcast, "Подготовка")
        Rel_R(feedback,feedbackAPI,"POST \npostfeedback", "JSON")
        Rel_R(feedback,feedbackAPI,"GET \ngetfeedback", "JSON")
    }

    ContainerDb(db, "База данных рецензий, докладов, обратной связи", "Postgresql",$sprite="postgresql")

    Rel_R(user, feedback, "Использование", "HTTPS")
    Rel_L(customer, feedback, "Использование", "HTTPS")
    Rel(organizer, feedback, "Просмотр", "HTTPS")
    Rel_R(user, broadcast, "Выступление и просмотр", "HTTPS")
    schedule <--> broadcast: Синхронизация
    broadcast <--> feedback: Синхронизация
    Rel_L(customer, broadcast, "Просмотр", "HTTPS")

    Rel(recenzent, reviewer, "Запрос списка неоцененных докладов", "HTTPS")
    Rel(reviewer, reviewerAPI, "GET \nunreviewedTalks", "JSON")
    Rel(reviewerAPI, db,"Чтение", "JDBC")

    Rel(organizer, schedule, "Запрос информации о новых поданных докладах", "HTTPS")
    Rel_R(schedule, workflowAPI, "GET \ninfonewtalks", "JSON")
    Rel_R(workflowAPI, db,"Чтение/Запись", "JDBC")

    Rel_L(user, workflow, "Создание доклада", "HTTPS")
    Rel(workflow, workflowAPI, "POST \ntalks", "JSON")

}

@enduml
```
**Не смогла добавить взаимодействие так как это в любом опробованном мною случае ухудшало читаемость схемы:** 
Rel(feedbackAPI, db, "Чтение/Запись", "JDBC")

    
    


### [Компонентная архитектура](components/components.md)


### Реализация сценариев использования
<!-- Реализация сценариев использования на основе взаимодействия компонентов системы и внешних систем/участников.
Диаграммы последовательности (UML Sequence diagram) и текстовое описание.

Подробнее: 
https://confluence.mts.ru/pages/viewpage.action?pageId=399442132
https://confluence.mts.ru/pages/viewpage.action?pageId=399442170
-->
| ID     | Описание                          | Реализация                                    |
|--------|-----------------------------------|-----------------------------------------------|
| UC.001 | *Название сценария использования* | [Реализация сценария](uc-impl/uc.001-impl.md) |

### Программные интерфейсы
<!-- Спецификации публичных API системы и ее компонентов (синхронных, событийных). Создается на основе модели предметной области для реализации сценариев использования. 
  Форматы: OAS/Swagger, GraphQL, AsyncAPI/CloudEvents
-->
| Компонент             | Интерфейс                                      |
|:----------------------|:-----------------------------------------------|
| *Название компонента* | *[Название интерфейса](api/service-name.yaml)* |

### [Схема развертывания](deployment/deployment.md)
