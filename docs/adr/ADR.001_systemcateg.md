# ADR.001 Категория системы ACID база данных СP
<!-- Название ADR состоит из [ADR.###] [Коротко суть принятого решения] -->

* Статус: Предложено
* Владелец: gagarskaya.aa@gmail.com

## Контекст
<!-- Описание проблемы, требующей решения, причин, побудивших принять решение, ограничений, действовавших на момент принятия решения -->
Для конференции helloconf.mts.ru требуется выбрать класс системы по теореме CAP, и определиться, какие принципы будут заложены: ACID или BASE, с учётом существующих нефункциональных требований (README.md)

## Варианты решения
## 1. ACID или BASE
### Вариант 1. ACID
* **Плюсы**
  * Согласованность данных и целостность во всех операциях, то есть пользователи всегда будут видеть корректное и актуальное раписание докладов.
* **Минусы**
  * Высокая нагрузка на сервер может привести к задержкам в обработке операций.
  * Не очень хорошо подходит для распределенных систем и масштабирования горизонтально, так как это может привести к увеличению количества блокировок и снижению производительности
### Вариант 2. BASE
* **Плюсы**
  * Cистема нацелена на непрерывную работу, даже при сбоях, благодаря широкому использованию репликации и кэширования данных.  
  * Возможность проектировать гибкие и масштабируемые системы, что особенно важно для приложений с большим количеством пользователей.
* **Минусы**
  * Система отвечает на любой запрос, но этот ответ может быть содержать ошибку или несогласованные данные.

## 2. База данных
### Вариант 1. База данных СА
<!-- Описание варианта 1 -->
* **Плюсы**
  * Высокая согласованность данных: все участники конференции будут иметь доступ к актуальной информации.
  * Высокая доступность сервиса: все участники смогут подключаться к конференции в любое время и получать актуальную информацию.
* **Минусы**
  * Все плюсы исчезают при большом потоке пользователей.
  * Невозможность масштабируемости при высокой нагрузке со стороны пользователей.
  * Система нераспределенная, отказоустойчивость не обеспечена, при отказе одного узла, доступа к системе не будет.

### Вариант 2. База данных АР
<!-- Описание варианта 2 -->
* **Плюсы**
  * Информация о докладах, программе конференции и т.д., будет доступной для пользователей в любое время, даже при сбоях в сети. 
* **Минусы**
  * Информация о докладах в расписании может не быть актуальной.
  * Некоторые доклады могут быть утеряны.
  * Программа конференции может не отображаться одинаково для всех пользователей.

### Вариант 3. База данных СР
<!-- Описание варианта 2 -->
* **Плюсы**
  * Данные всегда будут согласованны, пользователи будут видеть актуальное раписание докладов.
* **Минусы**
  * Пользователи не будут иметь доступа к расписанию конференции во время сбоя в сети.
  * Пользователи будут иметь плохое качество трансляции или даже её прерывание при плохом интернет соединении.
  * Пользователи не смогут получить обратную связь в случае неполадок в заданный период 48 часов.


## Решение
<!-- Описание выбранного решения. Решение должно быть сформулировано чётко ("Мы используем...", "Мы не используем", а не "Желательно.." или "Предлагается..."). 
Должна быть понятна связь между решением и проблемой, почему выбрали именно это решение из вариантов -->
Мы используем ACID базу данных СР, которая гарантирует согласованность данных и устойчивость к разделению сети, но может быть недоступна в случае сбоя в сети.
Пояснение:
1. СА не подоходит, так как в соответсвии с нефункциональными требованиями требуется высокая отказоустойчивость и масштабируемая архитектура с использованием распределенных вычислительных систем и/или балансировщика.
2. АР и BASE не подходят, так как для системы конференций критически важна согласованность данных.
3. Пояснение обоснованности выбора CP и ACID:
   
| Нефункциональное требование     | CP    | ACID        | 
|---------------------------------|-------|-------------|
|Система должна обеспечивать возможность одновременной обработки не менее 3 заявок на доклад в час, 71 заявки в день, 500 заявок в неделю|Высокая скорость обработки данных и быстрый доступ к ним||
|Инструменты обратной связи должны быть доступны как минимум в течение 48 часов после получения уведомления о том, что доклад был отклонен|Сохранение данных в базе данных и быстрый доступ к ним||
|Платформа для трансляции должна иметь масштабируемую архитектуру с использованием распределенных вычислительных систем и/или балансировщика нагрузки| Поддержка горизонтального масштабирования и распределенных систем|Поддержка горизонтального масштабирования при добавлении дополнительных узлов базы данных|
|Пропускная способность интернет-канала должна быть не менее 75 Мбит/с, а задержка при передаче не более 3 секунд|Быстрый доступ к данным и их быстрая обработка||
|Наличие не менее 2-х резервных серверов для трансляции|Высокая отказоустойчивость и поддержка репликации данных|Обеспечение транзакционной согласованности и устойчивости к сбоям|

## Последствия
<!-- Положительные и отрицательные последствия (trade-offs). Арх. решения, которые потребуется принять как следствие принятого решения. Если решение содержит риски, то описано, как с ними планируют поступить (за счет чего снижать, почему принять). -->
### Последствия выбора ACID:
* **Положительные**:
  * Более высокая надежность: транзакции будут выполнены в полном объеме или не выполнены вообще.
* **Отрицательные**:
  * Более медленная производительность.
  * Более высокие затраты на обеспечение отказоустойчивости и мастабируемости.
### Последствия выбора CP:
* **Положительные**:
  * В случае разделения сети на несколько частей (т.е. при возникновении сетевых сбоев или проблем с доступностью сети) система будет продолжать функционировать и обеспечивать согласованность данных.
* **Отрицательные**:
  * При возникновении сбоев в сети или недоступности одного из узлов базы данных, система может временно терять доступ к данным на этом узле, что может привести к увеличению времени ответа на запросы и снижению производительности.


